<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Caller</title>
</head>
<body>
<h2>Caller</h2>
<video id="local" autoplay muted></video>
<textarea id="offer" placeholder="Offer"></textarea><br>
<button onclick="createOffer()">Create Offer</button>

<script>
const pc = new RTCPeerConnection();
const video = document.getElementById("local");

navigator.mediaDevices.getUserMedia({video:true,audio:true})
.then(stream=>{
  video.srcObject=stream;
  stream.getTracks().forEach(t=>pc.addTrack(t,stream));
});

pc.onicecandidate=e=>{
  if(e.candidate===null)
    document.getElementById("offer").value=
      JSON.stringify(pc.localDescription);
};

function createOffer(){
  pc.createOffer().then(d=>pc.setLocalDescription(d));
}
</script>
</body>
</html>